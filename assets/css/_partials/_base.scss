// Typography

html { font-size: 100%; }

body {
  @include type-serif;
  color: $color-base;
  background: $color-base-vapor;
}

h1, h2, h3, h4, h5 {
  @include type-sans;
  @include bold;
}

h1 { @include type-xxl; }

h2 { @include type-xl; }

h3 { @include type-l; }

p, li, h4 { @include type-m; }

p { @include type-serif; }

h4 { font-weight: 600; }

h5 { @include type-s; }

b, strong { @include bold; }

i, em { @include italic; }

.text-center { @include text-center; }

.text-left { @include text-left; }

.text-right { @include text-right; }

// Links

a {
  @include smooth;
  color: $color-highlight;
  &:hover { color: $color-highlight-dark; }
  p & {
    position: relative;
    &:after {
      content: '';
      position: absolute;
      right: 0;
      left: 0;
      bottom: $space-xs;
      height: $space-xs/2;
      opacity: 0;
      background-color: $color-highlight-light;
      @include smooth-pop;
    }
    &:hover:after {
      opacity: 1;
      transform: translateY($space-xs/2);
    }
  }
}

// List Items

ol, ul {
  list-style-position: outside;
  padding-left: $space-m;
  @include bp(m) { padding-left: 0; }
}
ol li { list-style-type: decimal; }
ul li { list-style-type: circle; }

// Page Structure

.wrapper { @include wrapper; }

img {
  max-width: 100%;
  height: auto;
}

figure {
  position: relative;
  overflow: hidden;
}

.btn, button, input[type="submit"] {
  @include btn;
  @include icon;
}

header[role="main"] {
  position: fixed;
  width: 100%;
  z-index: 100;
  top: 0;
  background-color: rgba(#fff,0.9375);
  border-bottom: $border $color-base-ghost;
  section { @include wrapper-short; }
}

footer[role="main"] {
  border-top: $border $color-base-ghost;
  section {
    @include wrapper-short;
    @include text-center;
  }
}

nav[role="main"] {
  display: flex;
  align-items: center;
  justify-content: space-around;
  flex-wrap: wrap;
}

main:before {
  content: '';
  display: block;
  height: 4.875rem;
  @include bp(s) { height: 3.4375rem; }
}

.logo {
  flex-basis: 100%;
  @include text-center;
  @include bp(s) { flex-basis: auto; }
  svg {
    margin: 0 auto;
    @include bp(xs) { max-height: $space-m; }
    path { fill: currentColor; }
  }
}

.linky {
  @include type-sans;
  @include all-caps;
  @include icon;
  font-weight: 600;
  color: $color-base-ish;
  &:hover { color: $color-highlight; }
  svg {
    @include smooth-pop;
    path { fill: currentColor; }
  }
  &.follow {
    @include bp(s) { order: -1; }
    &:hover svg { transform: rotate(90deg); }
  }
  &.suggest:hover svg { transform: translateY(-($space-xs/2)); }
  &.subscribe:hover svg { transform: translate3d(0,0,0) scale(1.0625); }
}

.book-holder {
  display: flex;
  flex-wrap: wrap;
  @include wrapper-bleed;
  .home & {
    @include bp(s) { padding-top: $space-l; }
    @include bp(xxl) { padding-top: $space-xl; }
  }
}

.book {
  flex-basis: 100%;
  @include text-center;
  + .book { @include bp(xs) { @include oomph; } }
  figure {
    background: url('../img/loading.svg') no-repeat center center;
    display: inline-block;
    min-height: $space-xl;
    box-shadow: 0 0.1875rem 0.375rem -0.1875rem rgba(#000,0.375);
    @include smooth;
    &:hover { box-shadow: 0 1.5rem 3rem -1.5rem rgba(#000,0.25); }
  }
  img {
    margin: 0 auto;
    max-height: 100%;
  }
  figcaption { @include spacer; }
  .book--title { @include legible; }
  .book--author { color: $color-base-ish; }
}

.book--author {
  @include type-sans;
  &--actual { font-weight: 600; }
}

.home {
  .book {
    @include bp(s) { flex-basis: $grid-1-2; }
    @include bp(m) { flex-basis: $grid-1-3; }
    @include bp(xl) { flex-basis: $grid-1-4; }
    figure {
      height: 15rem;
      @include bp(xl) { height: 22.5rem; }
    }
    .book--title { margin: 0 auto; }
  }
}

.book--detail {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  figure, figcaption {
    flex-basis: 100%;
    @include bp(m) { flex-basis: $grid-1-2; }
  }
  figure {
    box-shadow: none !important;
    height: 15rem;
    @include bp(s) { height: 22.5rem; }
    @include bp(xl) { height: 30rem; }
  }
  figcaption {
    @include text-left;
    @include oomph;
    @include bp(m) { margin-top: 0; }
  }
  .book--description, .book--buy { @include oomph; }
  .book--title, .book--description { @include legible; }
}

.related {
  background-color: $color-bg;
  border-top: $border $color-base-ghost;
  .book-holder { justify-content: center; }
  header, footer {
    @include text-center;
    flex-basis: 100%;
    display: none;
    h4 {
      @include all-caps;
      color: $color-base-ish;
    }
  }
  header {
    order: -1;
    + footer { display: block; }
  }
  .book {
    @include oomph;
    @include bp(s) { flex-basis: $grid-1-2; }
    @include bp(m) { flex-basis: $grid-1-3; }
    @include bp(ml) { flex-basis: $grid-1-4; } 
    figure {
      height: 10.5rem;
      @include bp(xl) { height: 15rem; }
    }
    .book--title { margin: 0 auto; }
    + header { display: block; }
    + header + footer { display: none; }
  }
  footer {
    @include oomph-small;
    color: $color-base-ish;
  }
}